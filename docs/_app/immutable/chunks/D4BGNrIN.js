import{G as i}from"./DQP14zVN.js";import{C as n,u as d,r as p}from"./C6i2Uxh4.js";const t="KHR_materials_specular";class _{constructor(a){this.name=t,this.order=190,this._loader=a,this.enabled=this._loader.isExtensionUsed(t)}dispose(){this._loader=null}loadMaterialPropertiesAsync(a,e,o){return i.LoadExtensionAsync(a,e,this.name,async(l,s)=>{const r=new Array;r.push(this._loader.loadMaterialPropertiesAsync(a,e,o)),r.push(this._loadSpecularPropertiesAsync(l,s,o));const c=this._loader._getOrCreateMaterialAdapter(o);return s.extensions&&s.extensions.EXT_materials_specular_edge_color&&s.extensions.EXT_materials_specular_edge_color.specularEdgeColorEnabled&&c.enableSpecularEdgeColor(!0),await Promise.all(r).then(()=>{})})}_loadSpecularPropertiesAsync(a,e,o){const l=this._loader._getOrCreateMaterialAdapter(o),s=new Array;return l.specularWeight=e.specularFactor??1,l.specularColor=e.specularColorFactor!==void 0?n.FromArray(e.specularColorFactor):new n(1,1,1),e.specularTexture&&(e.specularTexture.nonColorData=!0,s.push(this._loader.loadTextureInfoAsync(`${a}/specularTexture`,e.specularTexture,r=>{r.name=`${o.name} (Specular)`,l.specularWeightTexture=r}))),e.specularColorTexture&&s.push(this._loader.loadTextureInfoAsync(`${a}/specularColorTexture`,e.specularColorTexture,r=>{r.name=`${o.name} (Specular Color)`,l.specularColorTexture=r})),Promise.all(s).then(()=>{})}}d(t);p(t,!0,u=>new _(u));export{_ as KHR_materials_specular};
