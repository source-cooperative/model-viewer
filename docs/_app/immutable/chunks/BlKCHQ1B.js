import{G as d}from"./DQP14zVN.js";import{C as l,u as c,r as m}from"./C6i2Uxh4.js";const a="KHR_materials_sheen";class g{constructor(n){this.name=a,this.order=190,this._loader=n,this.enabled=this._loader.isExtensionUsed(a)}dispose(){this._loader=null}loadMaterialPropertiesAsync(n,e,o){return d.LoadExtensionAsync(n,e,this.name,async(s,r)=>{const h=new Array;return h.push(this._loader.loadMaterialPropertiesAsync(n,e,o)),h.push(this._loadSheenPropertiesAsync(s,r,o)),await Promise.all(h).then(()=>{})})}_loadSheenPropertiesAsync(n,e,o){const s=this._loader._getOrCreateMaterialAdapter(o),r=new Array;s.configureFuzz();const h=e.sheenColorFactor!==void 0?l.FromArray(e.sheenColorFactor):l.Black(),i=e.sheenRoughnessFactor!==void 0?e.sheenRoughnessFactor:0;return s.fuzzWeight=1,s.fuzzColor=h,s.fuzzRoughness=i,e.sheenColorTexture&&r.push(this._loader.loadTextureInfoAsync(`${n}/sheenColorTexture`,e.sheenColorTexture,t=>{t.name=`${o.name} (Sheen Color)`,s.fuzzColorTexture=t})),e.sheenRoughnessTexture&&(e.sheenRoughnessTexture.nonColorData=!0,r.push(this._loader.loadTextureInfoAsync(`${n}/sheenRoughnessTexture`,e.sheenRoughnessTexture,t=>{t.name=`${o.name} (Sheen Roughness)`,s.fuzzRoughnessTexture=t}))),Promise.all(r).then(()=>{})}}c(a);m(a,!0,u=>new g(u));export{g as KHR_materials_sheen};
