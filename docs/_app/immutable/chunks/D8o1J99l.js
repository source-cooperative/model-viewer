import{G as d}from"./3UQ8_E_Z.js";import{u as c,r as u}from"./Mxg7T9gF.js";const a="KHR_materials_anisotropy";class _{constructor(s){this.name=a,this.order=195,this._loader=s,this.enabled=this._loader.isExtensionUsed(a)}dispose(){this._loader=null}loadMaterialPropertiesAsync(s,o,e){return d.LoadExtensionAsync(s,o,this.name,async(t,r)=>{const n=new Array;n.push(this._loader.loadMaterialPropertiesAsync(s,o,e)),n.push(this._loadAnisotropyPropertiesAsync(t,r,e)),await Promise.all(n)})}async _loadAnisotropyPropertiesAsync(s,o,e){const t=this._loader._getOrCreateMaterialAdapter(e),r=new Array,n=o.anisotropyStrength??0,l=o.anisotropyRotation??0;t.specularRoughnessAnisotropy=n,t.geometryTangentAngle=l;const y=o.extensions??{};(!y.EXT_materials_anisotropy_openpbr||!y.EXT_materials_anisotropy_openpbr.openPbrAnisotropyEnabled)&&t.configureGltfStyleAnisotropy(!0),o.anisotropyTexture&&(o.anisotropyTexture.nonColorData=!0,r.push(this._loader.loadTextureInfoAsync(`${s}/anisotropyTexture`,o.anisotropyTexture,p=>{p.name=`${e.name} (Anisotropy Intensity)`,t.geometryTangentTexture=p}))),await Promise.all(r)}}c(a);u(a,!0,i=>new _(i));export{_ as KHR_materials_anisotropy};
